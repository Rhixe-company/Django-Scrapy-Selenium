(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{17722:function(e,t,r){Promise.resolve().then(r.bind(r,60168)),Promise.resolve().then(r.bind(r,391)),Promise.resolve().then(r.bind(r,90960)),Promise.resolve().then(r.bind(r,57052)),Promise.resolve().then(r.bind(r,17170)),Promise.resolve().then(r.bind(r,58454)),Promise.resolve().then(r.bind(r,76071)),Promise.resolve().then(r.t.bind(r,67200,23)),Promise.resolve().then(r.t.bind(r,57531,23)),Promise.resolve().then(r.bind(r,20214)),Promise.resolve().then(r.bind(r,58233))},70338:function(e,t,r){"use strict";var s=r(68247),n=r(80888);t.Z=e=>{let{endpoint:t,divId:r}=e,[a,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch(t),r=await e.json();l(r)}catch(e){console.error("Error fetching data:",e)}})()},[t]),(0,n.useEffect)(()=>{if(!a)return;let e=document.getElementById(r);if(!e)return;let t=t=>{Array.from(t.getElementsByTagName("script")).forEach(t=>{let r=document.createElement("script");r.type=t.type||"text/javascript",t.src?r.src=t.src:r.text=t.innerHTML,e.appendChild(r)})},s=Promise.resolve();a.divs&&a.divs.length>0&&a.divs.forEach(r=>{let{value:s,enabled:n}=r;if(n){let r=document.createElement("div");r.innerHTML=s,e.appendChild(r),t(r)}}),a.scripts&&a.scripts.length>0&&a.scripts.forEach(t=>{let{value:r,enabled:n}=t;s=s.then(()=>new Promise((t,s)=>{if(n){let n=document.createElement("script");n.src=r,n.async=!0,n.setAttribute("data-cfasync","false"),n.type="text/javascript",n.onload=()=>{e.appendChild(n),t()},n.onerror=()=>s(Error("Failed to load script: ".concat(r))),document.body.appendChild(n)}}))}),s.then(()=>{console.log("All scripts loaded successfully!");let t=new MutationObserver(()=>{let r=e.querySelectorAll(".container-b686b0074d05dc5d58b2691bbd7f981c__link");r.length>0&&(r.forEach(e=>{e.style.zIndex="9"}),t.disconnect())});t.observe(e,{childList:!0,subtree:!0})}).catch(e=>{console.error("Error loading scripts:",e)})},[a,r]),(0,s.jsx)("div",{id:r})}},60168:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(68247);r(80888);var n=r(70338),a=r(59355);function l(){let{user:e,loading:t,isLoggedIn:r}=(0,a.a)();return!t&&r&&(null==e?void 0:e.premium.active)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(n.Z,{endpoint:"/api/ads/popular-today",divId:"popular-today-ads"})}},52842:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var s=r(68247),n=r(80888),a=r(58023);let l=n.forwardRef((e,t)=>{let{className:r,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},17170:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(68247),n=r(80888),a=r(91907),l=r(52842),i=r(48024),o=r(3643),c=r(54016),u=r(69698),d=r(61524),m=r(8201),f=r(69226),h=r(94325);let p=c.z.object({username:c.z.string().min(5,"Username must be at least 5 characters long")}),x=async()=>{let e=Date.now();return new Promise((t,r)=>{let s=setInterval(()=>{let n=localStorage.getItem("user");n?(clearInterval(s),t(JSON.parse(n))):Date.now()-e>=5e3&&(clearInterval(s),r(Error("No user found")))},100)})},b=async e=>{try{return(await (0,d.a4)("/api/user/check",{username:e})).data.available}catch(e){return(0,h.A)({title:"Error checking username availability."}),!1}};function g(){let e=(0,f.useRouter)(),[t,r]=(0,n.useState)(null),[c,g]=(0,n.useState)(!0),[v,w]=(0,n.useState)(!1),y=(0,n.useRef)(null),j=(0,f.useSearchParams)().get("success");(0,n.useEffect)(()=>{"true"===j&&(w(!0),e.push("/"))},[j]),(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("user");if(e)r(JSON.parse(e));else{let e=await x();r(e)}}catch(e){console.error(e)}finally{g(!1)}})()},[e]),(0,n.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let{control:N,handleSubmit:E,setError:I,formState:{errors:P}}=(0,o.cI)({resolver:(0,u.F)(p),defaultValues:{username:""}}),C=async e=>{if(await b(e.username))try{let t=await (0,d.a4)("/api/user/update-username",{username:e.username});200===t.status?setTimeout(()=>{w(!1),(0,h.A)({title:"The username has been updated successfully!"})},500):(0,h.A)({title:"Failed to update username."})}catch(e){(0,h.A)({title:"An error occurred while updating the username."})}else I("username",{type:"manual",message:"Username is not available."})};return!v||c?null:(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsx)("div",{ref:y,className:"p-6 w-auto rounded-lg",children:(0,s.jsxs)(a.Zb,{className:"bg-[#191919] border-none",children:[(0,s.jsxs)(a.Ol,{className:"flex flex-col items-center",children:[(0,s.jsx)(m.default,{src:"/images/logo.webp",alt:"Asura Scans",width:96,height:96}),(0,s.jsx)(a.ll,{className:"text-white text-2xl",children:"Enter a username"}),(0,s.jsx)(a.aY,{className:"text-muted-foreground text-white pb-0 items-start",children:"Accounts created using Google login default to the user's full name as their username."}),(0,s.jsx)(a.aY,{className:"pt-4 text-muted-foreground text-white pb-0 items-start text-left w-full",children:"Please enter a custom username below"})]}),(0,s.jsx)(a.aY,{children:(0,s.jsxs)("form",{onSubmit:E(C),className:"w-full",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("div",{className:"absolute left-2 top-3",children:(0,s.jsx)(i.F,{})}),(0,s.jsx)(o.Qr,{name:"username",control:N,render:e=>{let{field:t}=e;return(0,s.jsx)(l.I,{...t,placeholder:"Username",className:"w-full p-6 pl-10 bg-secondarybackground text-white placeholder-gray-400 rounded-xl focus:outline-none focus:ring-2 focus:ring-white ".concat(P.username?"border-red-500 focus:ring-red-500":""),autoFocus:!0})}}),P.username&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1.5",children:P.username.message})]}),(0,s.jsx)(a.eW,{className:"flex justify-center mt-4 p-0",children:(0,s.jsx)("button",{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white text-lg px-6 py-3 rounded-lg",children:"Continue"})})]})})]})})})}},94325:function(e,t,r){"use strict";r.d(t,{A:function(){return d},ToastProvider:function(){return m}});var s=r(68247),n=r(80888),a=r(28076),l=r(58023);let i=[],o=[],c=e=>{let t=Math.random().toString(36).substring(2,9),r={...e,id:t};return i.push(r),o.forEach(e=>e([...i])),e.duration!==Number.POSITIVE_INFINITY&&setTimeout(()=>{u(t)},e.duration||5e3),t},u=e=>{let t=i.findIndex(t=>t.id===e);-1!==t&&(i.splice(t,1),o.forEach(e=>e([...i])))};function d(e){return c(e)}function m(e){let{children:t}=e,{toasts:r,dismiss:d}=function(){let[e,t]=(0,n.useState)(i);return(0,n.useEffect)(()=>(o.push(t),()=>{o=o.filter(e=>e!==t)}),[]),{toasts:e,toast:c,dismiss:u}}();return(0,s.jsxs)(s.Fragment,{children:[t,(0,s.jsx)("div",{className:"fixed bottom-0 right-0 z-50 p-4 flex flex-col gap-2 max-w-md w-full",children:r.map(e=>(0,s.jsxs)("div",{className:(0,l.cn)("bg-zinc-900 border border-zinc-800 rounded-lg shadow-lg p-4 flex gap-3 items-start","animate-in slide-in-from-bottom-5 duration-300"),children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.title}),e.description&&(0,s.jsx)("div",{className:"text-sm text-zinc-400 mt-1",children:e.description})]}),(0,s.jsx)("button",{onClick:()=>d(e.id),className:"text-zinc-400 hover:text-white transition-colors",children:(0,s.jsx)(a.Z,{className:"w-4 h-4"})})]},e.id))})]})}},48024:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});var s=r(68247);let n=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("svg",{width:"26",height:"27",viewBox:"0 0 26 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.6214 8.5089C18.6214 11.6639 16.0918 14.1937 12.9345 14.1937C9.7784 14.1937 7.24769 11.6639 7.24769 8.5089C7.24769 5.35391 9.7784 2.8252 12.9345 2.8252C16.0918 2.8252 18.6214 5.35391 18.6214 8.5089ZM12.9345 24.3091C8.27498 24.3091 4.34082 23.5518 4.34082 20.6299C4.34082 17.707 8.2997 16.9765 12.9345 16.9765C17.5951 16.9765 21.5282 17.7338 21.5282 20.6557C21.5282 23.5787 17.5693 24.3091 12.9345 24.3091Z",fill:"white"})})})},28076:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(49044).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[9590,8791,3397,7200,6546,1577,5936,7151,768,4751,7292,8754,6501,6539,1744],function(){return e(e.s=17722)}),_N_E=e.O()}]);