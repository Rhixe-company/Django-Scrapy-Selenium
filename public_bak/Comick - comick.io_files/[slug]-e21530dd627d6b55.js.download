try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4ab84547-2290-43b0-8e6b-f038d01fdd1c",e._sentryDebugIdIdentifier="sentry-dbid-4ab84547-2290-43b0-8e6b-f038d01fdd1c")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6685],{14610:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var s=r(67795),l=r(82891),a=class extends s.${bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,l.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,l.PL)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var r,s;let{state:a}=e,n=super.createResult(e,t),{isFetching:i,isRefetching:c,isError:o,isRefetchError:d}=n,u=null==(s=a.fetchMeta)||null==(r=s.fetchMore)?void 0:r.direction,h=o&&"forward"===u,m=i&&"forward"===u,x=o&&"backward"===u,p=i&&"backward"===u;return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,l.rB)(t,a.data),hasPreviousPage:(0,l.RQ)(t,a.data),isFetchNextPageError:h,isFetchingNextPage:m,isFetchPreviousPageError:x,isFetchingPreviousPage:p,isRefetchError:d&&!h&&!x,isRefetching:c&&!m&&!p}}constructor(e,t){super(e,t)}},n=r(61168);function i(e,t){return(0,n.t)(e,a,t)}},17651:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(93688),l=r(42985),a=r(59336),n=r(56854),i=r(66478),c=r(3169);function o(){let e=(0,s.jE)(),t=(0,n.A)(),r=(0,c.md)(i.p9);return(0,l.n)({mutationFn:s=>(0,a.A)("https://api.comick.io/follow",{body:JSON.stringify({id:s.id,t:s.type}),mode:"cors",method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(l=>{let a=r.data.info.list;return 0==s.type?a=a.filter(e=>e!=s.hid):a.includes(s.hid)||a.push(s.hid),t.mutate({list:a}),e.invalidateQueries({queryKey:["get_follow_by_user"]}),e.invalidateQueries({queryKey:["get_following_comics_or_by_id"]}),e.invalidateQueries({queryKey:["following_chapters"]}),e.invalidateQueries({queryKey:["current_user_list"]}),e.invalidateQueries({queryKey:["comic_ids_current_user_list"]}),e.invalidateQueries({queryKey:["user"]}),l}),onSuccess:(t,r)=>{e.setQueryData(["get_follow_by_user",r.id],e=>((null==e?void 0:e.follow)||e||(e={}),e.follow=t,e))}})}},25150:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(23798),l=r(97393);r(21462);let a={xs:"rounded px-2 py-1 text-xs",sm:"rounded px-2.5 py-1.5 text-xs",md:"rounded-md px-3 py-2 text-sm leading-4",lg:"rounded-md px-4 py-2 text-sm",xl:"rounded-md px-4 py-2 text-base","2xl":"rounded-md px-6 py-3 text-base"},n={default:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:ring-blue-500",primary:"border-transparent bg-blue-600 dark:bg-blue-600 text-white hover:bg-blue-700 dark:hover:bg-blue-500 focus:ring-blue-500",secondary:"border-transparent bg-blue-100 dark:bg-blue-700 text-blue-700 dark:text-blue-200  hover:bg-blue-200 dark:hover:bg-blue-600 focus:ring-blue-500"};function i(e){let{size:t="md",children:r,onClick:i,type:c="button",color:o="default",disabled:d=!1,className:u="",id:h=""}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{type:c,onClick:i,color:o,disabled:d,className:(0,l.A)(u,"inline-flex items-center rounded font-medium shadow-sm focus:outline-none focus:ring-2",a[t],n[o],d?"opacity-75":""),id:h,children:r})})}},29456:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var s=r(23798),l=r(24661),a=r(15899),n=r(62842),i=r(3169),c=r(66478),o=r(21462),d=r(1118),u=r(97393),h=r(91019);let m=(0,o.forwardRef)((e,t)=>{let{hid:m,className:x="",showText:p=!1,setDownloaded:g=null}=e,f=(0,i.md)(c.p9),[v,y]=(0,i.fp)(c.TD),[j,b]=(0,o.useState)(!1),w=(0,o.useRef)(0),N=(0,o.useRef)(!1),_=(0,d.A)();async function k(e){b(!0);try{let{zipSync:t}=await r.e(7434).then(r.bind(r,77434)),s=(await r.e(1536).then(r.t.bind(r,99155,23))).default,a=(await r.e(7099).then(r.bind(r,97099))).default,n=await fetch("https://api.comick.io"+"/v1.0/chapter/".concat(e,"/download"),{credentials:"include"}),i=await n.json(),c=await a(i.images,async e=>{let t="https://"+(0,l.bc)()+"/"+e,r=await fetch(t,{cache:"no-store"}).then(e=>e.arrayBuffer());return w.current=w.current+1/i.images.length*100,_(),{key:e,binary:new Uint8Array(r)}},{concurrency:8}),o={};for(let e of c)o[e.key]=e.binary;let d=t(o);s.saveAs(new Blob([d],{type:"application/octet-stream"}),i.safe_title+".zip",!0),w.current=0,y(e);try{h.event({action:"download",options:{hid:e}})}catch(e){console.error(e)}_()}finally{b(!1)}}(0,o.useEffect)(()=>{g&&v.includes(m)&&g(!0)},[v,m,g]),(0,o.useImperativeHandle)(t,()=>({handleClick:A}));let A=async e=>{f.data.identity?(g&&g(!0),j||await k(m)):alert("Login required.")};return w.current>0?(0,s.jsxs)("span",{children:[Math.round(w.current),(0,s.jsx)("span",{children:"%"})]}):(0,s.jsxs)("span",{className:"cursor-pointer flex items-center space-x-1",onClick:A,children:[v.includes(m)?(0,s.jsx)(a.A,{className:(0,u.A)("w-5 h-5 hover:brightness-150 text-green-500 ")}):(0,s.jsx)(n.A,{className:(0,u.A)("w-5 h-5 hover:brightness-150",!N.current&&x)}),p&&(0,s.jsx)("div",{children:"Download as zip"})]})});m.displayName="Download";let x=m},38954:()=>{},42488:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(23798),l=r(33089),a=r.n(l),n=r(85271),i=r.n(n),c=r(21462),o=r(97393);function d(e){let{datetime:t,suffix:r=!1,className:l=""}=e,[n,i]=(0,c.useState)(!1);return(0,s.jsxs)("span",{className:(0,o.A)("cursor-pointer",n&&"z-10 relative",l),onClick:()=>{i(!n)},children:[n?new Date(t).toLocaleString():a()().to(t,!0)," ",r&&!n?"ago":""]})}a().extend(i(),{rounding:Math.floor})},52310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>eN,default:()=>e_});var s=r(23798),l=r(80702),a=r(46720),n=r(21462),i=r(35937),c=r.n(i),o=r(87261),d=r(23460);let u=n.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}),h=n.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,n.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))});var m=r(87041),x=r(66478),p=r(3169),g=r(70327),f=r(59336),v=r(24661),y=r(63179),j=r(97393),b=r(42488),w=r(17651),N=r(71768),_=r(96704);function k(e){var t,r,l,a,i,c,o,d,u;let{comic:h,firstChapters:m}=e,v=(0,p.md)(x.p9),{data:y,isFetching:j}=(a=h,i=v,(0,g.I)({queryKey:["get_follow_by_user",a.id],queryFn:async()=>(0,f.A)("https://api.comick.io/user/follow/comic/"+a.id,{credentials:"include",mode:"cors"}),enabled:!!a&&!!(null==i||null==(o=i.data)||null==(c=o.identity)?void 0:c.id)&&!!(null==i||null==(u=i.data)||null==(d=u.info)?void 0:d.list)&&i.data.info.list.includes(a.hid)})),b=(0,p.Xr)(x.G);return(0,n.useEffect)(()=>{var e,t,r;(null==y||null==(e=y.follow)?void 0:e.md_chapters)&&((null==y||null==(r=y.follow)||null==(t=r.md_chapters2)?void 0:t.hid)?b(y.follow.md_chapters2.hid):y.follow.md_chapters.hid&&b(y.follow.md_chapters.hid))},[null==y||null==(t=y.follow)?void 0:t.md_chapters,null==y||null==(l=y.follow)||null==(r=l.md_chapters2)?void 0:r.hid,b]),(0,s.jsxs)("div",{className:"flex items-center w-full md:max-w-md xl:max-w-xl space-x-3",children:[(0,s.jsx)(q,{data:y,firstChapters:m,comic:h,isFetching:j,user:v}),(0,s.jsx)(A,{data:y,comic:h,isFetching:j,user:v})]})}function A(e){var t;let{data:r,comic:l,user:a,isFetching:n}=e,i=(0,w.A)(),{requireAuth:c}=(0,m.h)();return n||a.isLoading?(0,s.jsx)("button",{className:(0,j.A)("md:w-96 h-12 btn px-2 py-3 flex-1"),children:(0,s.jsx)(y.A,{size:"sm",iconOnly:!0})}):a.data.identity&&(null==r||null==(t=r.follow)?void 0:t.type)?(0,s.jsxs)("select",{className:(0,j.A)("flex-1 mt-0 py-3 px-2 h-12 border border-gray-300 dark:bg-gray-700 dark:border-gray-700 rounded"),disabled:i.isPending,onChange:e=>i.mutate({id:l.id,type:Number(e.target.value),hid:l.hid}),value:r.follow.type,children:[(0,s.jsx)("option",{value:"0",children:"Unfollow"}),(0,s.jsx)("option",{value:"1",children:"Reading"}),(0,s.jsx)("option",{value:"2",children:"Completed"}),(0,s.jsx)("option",{value:"3",children:"On-Hold"}),(0,s.jsx)("option",{value:"4",children:"Dropped"}),(0,s.jsx)("option",{value:"5",children:"Plan to Read"})]}):(0,s.jsxs)("button",{className:(0,j.A)("md:w-96 h-12 btn px-2 py-3 flex-1",i.isPending?"disabled":""),onClick:()=>{c()&&!i.isPending&&i.mutate({id:l.id,type:1,hid:l.hid})},children:[(0,s.jsx)(u,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-base font-semibold ml-1",children:"Follow"})]})}function q(e){var t,r,l,a,i,o,d,u;let{data:m,comic:x,user:p,isFetching:g,firstChapters:f}=e,[b,w]=(0,n.useState)(!1),_="flex-1 md:w-96 h-12 btn btn-primary px-2 py-3 flex items-center rounded";return g||p.isLoading?(0,s.jsxs)("button",{className:(0,j.A)(_),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsx)(y.A,{size:"sm",iconOnly:!0})]}):p.data.identity&&(null==m?void 0:m.follow)||!f||!(f.length>0)?(null==m||null==(t=m.follow)?void 0:t.md_chapters)?(0,s.jsxs)(c(),{href:(0,v.g8)({slug:x.slug,hid:m.follow.md_chapters.hid,chap:m.follow.md_chapters.chap,lang:null==(l=m.follow.md_chapters)?void 0:l.lang,vol:null==(a=m.follow.md_chapters)?void 0:a.vol}),className:(0,j.A)(_,"flex flex-1"),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsxs)("span",{className:"text-base font-semibold ml-1 truncate",children:["Continue"," ",m.follow.md_chapters.chap?m.follow.md_chapters.chap:m.follow.md_chapters.vol&&"Vol. "+m.follow.md_chapters.vol]})]}):(null==m||null==(r=m.follow)?void 0:r.md_chapters2)?(0,s.jsxs)(c(),{href:(0,v.g8)({slug:x.slug,hid:null==(i=m.follow.md_chapters2)?void 0:i.hid,chap:null==(o=m.follow.md_chapters2)?void 0:o.chap,lang:null==(d=m.follow.md_chapters2)?void 0:d.lang,vol:null==(u=m.follow.md_chapters2)?void 0:u.vol}),className:(0,j.A)(_,"flex truncate flex-1"),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsxs)("span",{className:"text-base font-semibold ml-1",children:["Continue"," ",m.follow.md_chapters2.chap?m.follow.md_chapters2.chap:m.follow.md_chapters2.vol&&"Vol. "+m.follow.md_chapters2.vol]})]}):f?(null==f?void 0:f.length)>1?(0,s.jsxs)(s.Fragment,{children:[b?(0,s.jsx)(N.A,{title:"Select Chapter",open:b,position:"center",onClose:()=>w(!1),children:(0,s.jsx)(C,{chapters:f,comic:x,user:p})}):null,(0,s.jsxs)("button",{className:(0,j.A)(_,"flex flex-1"),onClick:()=>w(!0),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsxs)("span",{className:"text-base font-semibold ml-1",children:["Read"," ",f[0].chap&&!isNaN(f[0].chap)?"Ch. "+f[0].chap:f[0].vol&&"Vol. "+f[0].vol]})]})]}):(0,s.jsxs)(c(),{href:(0,v.g8)({slug:x.slug,hid:f[0].hid,chap:f[0].chap,lang:f[0].lang,vol:f[0].vol}),className:(0,j.A)(_,"flex flex-1"),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsxs)("span",{className:"text-base font-semibold ml-1",children:["Read"," ",f[0].chap&&!isNaN(f[0].chap)?"Ch. "+f[0].chap:f[0].vol&&"Vol. "+f[0].vol]})]}):null:(null==f?void 0:f.length)>1?(0,s.jsxs)(s.Fragment,{children:[b?(0,s.jsx)(N.A,{title:"Select Chapter",open:b,position:"center",onClose:()=>w(!1),children:(0,s.jsx)(C,{chapters:f,comic:x,user:p})}):null,(0,s.jsxs)("button",{className:(0,j.A)(_,"flex truncate flex-1"),onClick:()=>w(!0),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-base font-semibold ml-1",children:"Start Reading"})]})]}):(0,s.jsxs)(c(),{href:(0,v.g8)({slug:x.slug,hid:f[0].hid,chap:f[0].chap,lang:f[0].lang,vol:f[0].vol}),className:(0,j.A)(_,"flex truncate flex-1"),children:[(0,s.jsx)(h,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-base font-semibold ml-1",children:"Start Reading"})]})}function C(e){let{chapters:t,comic:r,user:l}=e,a=t.filter(e=>{var t,r,s;return!((null==(s=l.data)||null==(r=s.info)||null==(t=r.language)?void 0:t.length)>0)||!!l.data.info.language.includes(e.lang)});return(0,s.jsxs)("ul",{role:"list",className:"divide-y divide-gray-300 dark:divide-gray-600",children:[0==a.length&&t.length>0?(0,s.jsx)(_.A,{type:"error",children:"There are no chapters available in the languages you have selected, so Comick will display chapters in other languages instead."}):null,(0==a.length?t:a).map(e=>{var t,l,a;return(0,s.jsx)("li",{className:"flex justify-between",children:(0,s.jsx)(c(),{href:(0,v.g8)({slug:r.slug,hid:e.hid,chap:e.chap,lang:e.lang,vol:e.vol}),className:"hover:bg-gray-100 active:bg-gray-50 dark:hover:bg-gray-700 dark:active:bg-gray-700 w-full py-2",children:(0,s.jsxs)("div",{className:"flex min-w-0 gap-x-4",children:[(0,s.jsx)("i",{className:"size-6 flex-none flag-icon flag-icon-".concat((0,v.cq)(e.lang)," rounded")}),(0,s.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-gray-200 truncate",children:[e.chap&&!isNaN(Number(e.chap))?"Ch. "+e.chap:e.vol&&"Vol. "+e.vol," ",e.title&&(0,s.jsxs)("span",{className:"truncate font-normal",children:[" ","- ",e.title]})]}),(0,s.jsx)("p",{className:"line-clamp-1",children:(null==(t=e.md_chapters_groups)?void 0:t.length)>0?(0,s.jsx)("strong",{children:e.md_chapters_groups.map(e=>e.md_groups.title).join(", ")}):(null==(l=e.group_name)?void 0:l.length)>0?(0,s.jsx)("strong",{children:null==(a=e.group_name)?void 0:a.join(",")}):"Unknown"}),(0,s.jsxs)("p",{className:"text-gray-700 dark:text-gray-400",children:[(0,s.jsx)("span",{children:"".concat(e.up_count," upvotes")}),(0,s.jsx)("span",{className:"px-1",children:"•"}),(0,s.jsxs)("span",{children:["Uploaded ",(0,s.jsx)(b.A,{datetime:e.created_at})]})]})]})]})})},e.hid)})]})}var S=r(216),P=r(93688),R=r(52494),L=r.n(R),M=r(59075);function O(e){var t;let{total:r,limit:l,shallow:n=!0,scroll:i=!1,nextPrev:o}=e,d=Number(null!=(t=(0,a.useRouter)().query.page)?t:1),u=Math.ceil(r/l),h=L().parse(window.location.search.slice(0),{ignoreQueryPrefix:!0}),m=(0,M.A)();if(u<2)return null;let x=3;m("xl")?x=5:m("md")&&(x=4);let p=e=>({pathname:window.location.pathname,hash:"chapter-header",query:{...h,page:e}}),g=Math.min(d*l,r),f=Math.max(1,d-x),v=Math.min(u,d+x),y=[];f>1&&y.push(1),f>2&&y.push(-1);for(let e=f;e<=v;e++)y.push(e);return v<u-1&&y.push(-2),v<u&&y.push(u),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex w-full",id:"pagination",children:[o?d>1?(0,s.jsxs)(c(),{prefetch:!1,scroll:i,shallow:n,href:p(d-1),className:"btn m-2 flex-1 border rounded-md py-5 flex items-center justify-center font-semibold text-lg",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,s.jsx)("span",{children:" Prev"})]}):(0,s.jsxs)("div",{className:"btn m-2 flex-1 border w-50 rounded-md px-4 py-5 flex items-center justify-center font-semibold text-lg text-gray-300 dark:text-gray-500",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,s.jsx)("span",{children:" Prev"})]}):null,o?d>=u?(0,s.jsxs)("div",{className:"btn m-2 flex-1 border rounded-md px-4 py-5 flex items-center justify-center font-semibold text-lg text-gray-300 dark:text-gray-500",children:[(0,s.jsx)("span",{children:"Next "}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,s.jsxs)(c(),{prefetch:!1,scroll:i,shallow:n,href:p(d+1),className:"btn m-2 flex-1 border rounded-md py-5 flex items-center justify-center font-semibold text-lg",children:[(0,s.jsx)("span",{children:"Next "}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):null]}),(0,s.jsxs)("div",{className:"text-center my-3",children:["Showing ",(d-1)*l+1," to ",g," of ",r," items"]}),(0,s.jsxs)("nav",{className:"flex flex-wrap container m-auto",role:"navigation","aria-label":"pagination",children:[1===d?(0,s.jsx)("div",{className:"ml-3 mt-2 px-4 py-2 flex items-center justify-center text-gray-400",dangerouslySetInnerHTML:{__html:"&laquo; First"}}):(0,s.jsx)(c(),{shallow:n,scroll:i,prefetch:!1,href:p(1),className:"ml-3 mt-2 border rounded-md px-4 py-2 flex items-center justify-center",dangerouslySetInnerHTML:{__html:"&laquo; First"}}),y.map((e,t)=>{if(-1===e||-2===e)return(0,s.jsx)("div",{className:"ml-3 mt-2 border rounded-md px-4 py-2 flex items-center justify-center dark:border-gray-700",children:"..."},"ellipsis".concat(t));let r=e===d;return(0,s.jsx)(c(),{shallow:n,scroll:i,prefetch:!1,href:p(e),className:"ml-3 mt-2 border rounded-md px-4 py-2 w-12 h-12 flex items-center justify-center ".concat(r?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"),"aria-label":"Page ".concat(e),"aria-current":r?"page":void 0,children:e},"page-".concat(e))}),d===u?(0,s.jsx)("div",{className:"ml-3 mt-2 border rounded-md px-4 py-2 flex items-center justify-center text-gray-400",dangerouslySetInnerHTML:{__html:"Last &raquo;"}}):(0,s.jsx)(c(),{scroll:i,shallow:n,prefetch:!1,href:p(u),className:"ml-3 mt-2 border rounded-md px-4 py-2 flex items-center justify-center",dangerouslySetInnerHTML:{__html:"Last &raquo;"}})]})]})}var E=r(35302);let T=n.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,n.createElement("path",{fillRule:"evenodd",d:"M6.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.25 4.81V16.5a.75.75 0 0 1-1.5 0V4.81L3.53 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5Zm9.53 4.28a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V7.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});var F=r(66556),D=r(61390);let I=n.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m0 0 6.75-6.75M12 19.5l-6.75-6.75"}))});var K=r(1291),Q=r(45808),V=r(65684),B=r(29456),z=r(44291),H=r(71543);function U(e){var t,r,l,n,i,c,o,d;let{comic:u,langList:h,checkVol2Chap1:m}=e,y=(0,a.useRouter)(),b=(0,P.jE)(),w=(0,V.A)(),N=function(e){var t,r;let s=(0,a.useRouter)(),l=(0,p.md)(x.p9);return(0,g.I)({queryKey:["get_chapter_by_params",e,s.query,null==(r=l.data)||null==(t=r.info)?void 0:t.language],queryFn:async()=>{var t,r;let a=new URL("https://api.comick.io"+"/comic/".concat(e,"/chapters"));return(null==(r=l.data.info)||null==(t=r.language)?void 0:t.length)>0&&a.searchParams.append("lang",l.data.info.language.join(",")),s.query.lang&&(a.searchParams.delete("lang"),a.searchParams.append("lang",String(s.query.lang))),"all"==s.query.lang&&a.searchParams.delete("lang"),s.query["chap-order"]&&a.searchParams.append("chap-order",String(+s.query["chap-order"])),s.query["date-order"]&&a.searchParams.append("date-order",String(+s.query["date-order"])),s.query.page&&a.searchParams.append("page",String(s.query.page)),s.query.chap&&(a.searchParams.append("chap",String(s.query.chap)),a.searchParams.delete("page")),(0,f.A)(a.href,{mode:"cors"})},enabled:!!e&&s.isReady,refetchOnWindowFocus:!0})}(u&&u.hid),_=[];return(null==(r=N.data)||null==(t=r.chapters)?void 0:t.length)>0&&N.data.chapters.map(e=>{var t,r,s;(null==(r=e.group_name)||null==(t=r[0])?void 0:t.match(/official/i))&&!_.includes("Official")&&_.push("Official"),(null==(s=e.md_chapters_groups)?void 0:s.length)>0&&e.md_chapters_groups.map(e=>{_.includes(e.md_groups.title)||_.push(e.md_groups.title)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{id:"chapter-header",children:"Chapters"}),(0,s.jsxs)("div",{className:"flex justify-between md:justify-start items-center my-2",children:[(0,s.jsxs)("div",{className:"flex text-sm items-center",children:[(0,s.jsx)(E.A,{className:"fill-current mr-1 dark:text-gray-200 h-6 w-6 lg:w-8 lg:h-8"}),(0,s.jsxs)("p",{className:"whitespace-nowrap",children:[h.length," languages"," ",(0,s.jsx)("span",{className:"hidden md:inline",children:" are available."})]})]}),(0,s.jsx)("div",{className:"text-sm px-2 w-auto overflow-hidden ",children:(0,s.jsxs)("select",{className:"cursor-pointer pl-2 pr-6 py-1 border border-gray-300 rounded dark:border-gray-600",onChange:e=>{e.target.value?y.push({query:{...y.query,lang:e.target.value}},void 0,{shallow:!0}):y.push({query:{...y.query,lang:void 0}},void 0,{shallow:!0})},value:null!=(o=y.query.lang)?o:"",children:[(0,s.jsx)("option",{value:"",children:"Select language"}),(0,s.jsx)("option",{value:"all",children:"All languages"}),h.map(e=>{var t;return(null===v.Zh||void 0===v.Zh||null==(t=v.Zh[e])?void 0:t.nativeName)?(0,s.jsx)("option",{value:e,children:v.Zh[e].nativeName},"selectlang"+e):null})]})}),h.map((e,t)=>{var r;return(0,s.jsx)("i",{onClick:()=>{let t={...y.query};delete t.page,t.lang=e,y.push({query:t},void 0,{shallow:!0})},title:(null===v.Zh||void 0===v.Zh||null==(r=v.Zh[e])?void 0:r.nativeName)?v.Zh[e].nativeName:e,className:"flag-icon flag-icon-".concat((0,v.cq)(e),"  ml-2 cursor-pointer hover:opacity-60 hidden md:block ")+(y.query.lang==e?" ring-4 ring-blue-400 ":"")},t)})]}),(null==N||null==(n=N.data)||null==(l=n.chapters)?void 0:l.length)>0&&(0,s.jsxs)("div",{className:"flex justify-center items-center my-5",children:[(0,s.jsx)("div",{className:"text-sm mx-1",children:"Showing chapters "}),(0,s.jsx)("strong",{children:null!=(d=N.data.chapters[N.data.chapters.length-1].chap)?d:0}),(0,s.jsx)("div",{className:"text-sm mx-1",children:"to"}),(0,s.jsx)("strong",{children:N.data.chapters[0].chap}),(0,s.jsx)("div",{className:"text-sm mx-1",children:"- page"}),(0,s.jsxs)("strong",{children:[y.query.page?y.query.page:1,"/",Math.ceil(N.data.total/N.data.limit)]})]}),(0,s.jsx)("div",{className:"max-xl:overflow-auto 2xl:min-w-6xl 3xl:min-w-8xl items-stretch justify-between w-full",children:(0,s.jsxs)("table",{className:(0,j.A)("table-fixed w-full whitespace-nowrap",N.isFetching&&"opacity-50"),children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"customclass1 text-xs md:text-base left-0 w-7/12 md:w-5/12  text-left cursor-pointer  bg-white dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"flex items-center text-right ",children:[(0,s.jsxs)("div",{className:"flex items-center hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>"0"!=y.query["chap-order"]&&y.query["chap-order"]?y.push({query:{...y.query,"chap-order":"0","date-order":void 0}},void 0,{shallow:!0}):y.push({query:{...y.query,"chap-order":"1","date-order":void 0}},void 0,{shallow:!0}),children:[(0,s.jsxs)("span",{className:"text-gray-400 dark:text-gray-400",children:["Chap"," "]}),void 0==y.query["chap-order"]&&window.location.search.match(/\?/)?(0,s.jsx)(T,{className:"w-4 h-4 md:w-6 md:h-6 ml-1"}):"1"==y.query["chap-order"]?(0,s.jsx)(D.A,{className:"w-4 h-4 md:w-6 md:h-6"}):(0,s.jsx)(I,{className:"w-4 h-4 md:w-6 md:h-6"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Goto chap",defaultValue:y.query.chap,className:"pl-3 py-1 my-2 md:my-3 mx-3 !w-16 md:!w-3/5",onChange:e=>y.push({query:{...y.query,chap:e.target.value}},void 0,{shallow:!0})})]})}),(0,s.jsx)("th",{className:"w-20 xl:w-24 text-xs md:text-base text-right hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer group",onClick:()=>"0"===y.query["date-order"]?y.push({query:{...y.query,"date-order":"1","chap-order":void 0}},void 0,{shallow:!0}):y.push({query:{...y.query,"date-order":"0","chap-order":void 0}},void 0,{shallow:!0}),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:[(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-400 ",children:"Uploaded"}),void 0!=y.query["date-order"]?"0"==y.query["date-order"]?(0,s.jsx)(I,{className:"w-4 h-4 md:w-6 md:h-6 text-base"}):(0,s.jsx)(D.A,{className:"w-4 h-4 md:w-6 md:h-6 text-base"}):(0,s.jsx)(T,{className:"w-4 h-4 md:w-6 md:h-6 ml-1 text-base"})]})}),(0,s.jsx)("th",{className:"text-left pl-3 xl:pl-8 text-sm md:text-base0 text-gray-400 dark:text-gray-400",children:(null==_?void 0:_.length)>0?(0,s.jsxs)("select",{value:y.query.group?y.query.group:void 0,onChange:e=>{y.push({query:{...y.query,group:e.target.value}},void 0,{shallow:!0})},className:"max-w-[10em] !bg-white dark:!bg-gray-800 text-gray-400 dark:text-gray-400",children:[(0,s.jsx)("option",{value:"0",children:y.query.group?"--All--":"Group"}),_.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}):"Group"})]})}),(0,s.jsx)(Z,{comic:u,chaptersResult:N,markNextChap:w,checkVol2Chap1:m,queryClient:b})]})}),"error"==N.status&&(0,s.jsx)("div",{className:"text-center text-red-500",children:"An error has occurred"}),(0,s.jsx)("div",{className:"mt-3",children:(null==(c=N.data)||null==(i=c.chapters)?void 0:i.length)>0&&!y.query.chap?(0,s.jsx)(O,{total:N.data.total,limit:N.data.limit}):null})]})}function Z(e){var t,r,l,n;let{comic:i,chaptersResult:o,markNextChap:d,checkVol2Chap1:u,queryClient:h}=e,m=(0,a.useRouter)();if(o.isLoading)return(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,children:(0,s.jsx)("div",{className:"py-10 flex justify-center",children:(0,s.jsx)(y.A,{})})})})});if(o.failureCount>0)return(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,children:(0,s.jsx)("div",{className:"py-10",children:(0,s.jsxs)(_.A,{type:"error",children:["Failed to load "+o.failureCount," "]})})})})});if((null==(r=o.data)||null==(t=r.chapters)?void 0:t.length)==0)if(0==i.chapter_count)return(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"py-12 italic text-center font-bold",children:"No chapters yet"})})});else return(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:3,className:"py-12 italic text-center",children:[(0,s.jsx)("p",{className:"",children:"No results containing all your search terms were found."}),(0,s.jsxs)("a",{className:"link mr-3",onClick:()=>m.push({query:{...m.query,lang:"all"}},void 0,{shallow:!0}),children:["Show all languages (last chapter: ",i.last_chapter,")"]}),(0,s.jsx)(c(),{href:"/comic/"+i.slug,scroll:!1,prefetch:!1,className:"link",children:"Clear search queries"})]})})});return(0,s.jsx)("tbody",{children:(null==(n=o.data)||null==(l=n.chapters)?void 0:l.length)>0&&o.data.chapters.filter(e=>{var t,r;return"0"==m.query.group||!m.query.group||("Official"==m.query.group?null==(r=e.group_name)||null==(t=r[0])?void 0:t.match(/official/i):e.md_chapters_groups.some(e=>e.md_groups.title==m.query.group))}).map((e,t)=>(0,s.jsx)(G,{comic:i,chapter:e,index:t,markNextChap:d,checkVol2Chap1:u,queryClient:h},"chapter-row"+t))})}function G(e){var t,r,l,a,i,o,d;let{comic:h,chapter:m,index:g,markNextChap:f,checkVol2Chap1:y,queryClient:w}=e,N=(0,p.md)(x.p9),_=(0,M.A)(),k=(0,p.md)(x.G),[A,q]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1);if((null==m||null==(t=m.md_chapters_groups)?void 0:t.some(e=>"danke-fuers-lesen-k1itlii1"==e.md_groups.slug))&&!(null==N||null==(l=N.data)||null==(r=l.identity)?void 0:r.id))return null;let P="border-t dark:border-gray-700";g<1&&(P="");let R=!1;k==m.hid&&(R=!0);let L=[];return m.chap||"0"===m.chap?L.push((0,s.jsx)("span",{className:y?"":"font-semibold",title:"Chapter "+m.chap,children:"Ch. ".concat(m.chap)},"chap"+g)):L.push((0,s.jsx)(n.Fragment,{},"empty"+g)),m.vol&&L.push((0,s.jsx)("span",{className:y?"font-semibold":"",children:" Vol. ".concat(m.vol," ")},"vol"+g)),y&&m.vol&&L.reverse(),(g<3&&h.final_chapter&&m.chap==h.final_chapter||m.is_the_last_chapter)&&L.push((0,s.jsx)("span",{className:"ml-2",children:(0,s.jsx)(z.A,{variant:"gray",children:"END"})},"badge"+g)),m.title&&L.push((0,s.jsxs)("span",{className:"text-xs md:text-base",children:[" ",m.title]},"title"+g)),m.chap||m.vol||m.title||(L=(null==(d=h.genres)?void 0:d.includes(262))||1==h.last_chapter&&h.translation_completed||2==h.status?[(0,s.jsx)("span",{className:"font-semibold",children:"Oneshot"},"oneshost"+g)]:[(0,s.jsx)("span",{className:"font-semibold",children:"Unknown"},"unknown"+g)]),(0,s.jsxs)("tr",{className:"".concat(P," group "),onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),children:[(0,s.jsx)("td",{className:"customclass1 left-0 break-all cursor-pointer flex items-center justify-between group bg-white dark:bg-gray-800 ",children:(0,s.jsxs)(c(),{prefetch:!1,href:(0,v.g8)({chap:m.chap,hid:m.hid,lang:m.lang,slug:h.slug,vol:m.vol}),className:"py-3 w-full link-effect-no-ring dark:visited:text-gray-500 visited:text-gray-400 text-black dark:text-gray-200 flex items-center justify-between active:bg-blue-500/30 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("i",{className:"flag-icon mr-2 flag-icon-".concat((0,v.cq)(m.lang)," rounded")}),L]}),!_("sm")&&R?(0,s.jsx)(F.A,{className:"text-blue-500 group-hover:block hover:brightness-150 w-8 h-8"}):null,m.up_count-m.down_count!=0?(0,s.jsxs)("div",{className:"flex items-center w-10 justify-end",children:[(0,s.jsx)("div",{className:"text-sm !no-link",children:m.up_count-m.down_count}),(0,s.jsx)(K.A,{className:"w-3 h-3"})]}):null]},m.id)}),(0,s.jsx)("td",{className:"text-gray-600 text-right dark:text-gray-400 text-xs md:text-sm lg:text-base",title:"Created at "+new Date(m.created_at).toLocaleString(),children:m.created_at?(0,s.jsx)(b.A,{datetime:m.created_at}):null}),(0,s.jsxs)("td",{className:" pl-3 xl:pl-8 text-right text-gray-600 dark:text-gray-400 text-xs md:text-sm lg:text-base flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-32 md:w-40 lg:w-48 xl:w-56 text-left truncate",children:(null==(a=m.md_chapters_groups)?void 0:a.length)>0?m.md_chapters_groups.map((e,t)=>{var r;return(0,s.jsxs)("span",{children:[(null==(r=m.group_name)?void 0:r[0])=="Official"?"Official":(0,s.jsx)(c(),{href:"/group/".concat(e.md_groups.slug),prefetch:!1,className:"link text-blue-400 dark:text-blue-500",children:e.md_groups.title}),m.md_chapters_groups.length>1&&t<m.md_chapters_groups.length-1?(0,s.jsx)("span",{className:"text-gray-500",children:", "}):null]},"group"+t+m.id)}):(null==(i=m.group_name)?void 0:i.length)>0?(0,s.jsx)("span",{className:"dark:text-gray-400 text-gray-600",children:m.group_name[0]}):(0,s.jsx)("span",{className:"dark:text-gray-600 text-gray-300",children:"Unknown"})}),(0,s.jsx)("div",{children:(null==(o=m.identities)?void 0:o.traits)&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(Q.A,{className:"w-4 h-4"}),m.identities.traits.username&&(0,s.jsx)(c(),{prefetch:!1,href:"/user/"+m.identities.id+"/list",children:(0,s.jsx)("span",{className:"ml-2 w-30 truncate text-left",children:m.identities.traits.username})})]})})]}),(0,s.jsx)("div",{children:_("sm")&&(A||C||R)?(0,s.jsxs)("div",{className:(0,j.A)((A||C||R)&&"flex inset-y-0 items-center w-10 justify-end gap-4"),children:[(0,s.jsx)("div",{onClick:()=>{N.data.info?f({comicId:h.id,nextId:m.id,chapterId:m.id,create:!0,...m.chap?{chap:m.chap}:{}}).then(()=>{w.invalidateQueries({queryKey:["user"]})}):alert("Login Required.")},className:"cursor-pointer",title:R?"Bookmark the chapter":"Bookmarked",children:R?(0,s.jsx)(F.A,{className:"text-blue-500 group-hover:block hover:brightness-150 w-5 h-5"}):(0,s.jsx)(u,{className:"hidden group-hover:block hover:brightness-150 w-5 h-5"})}),_("md")&&(0,s.jsx)(H.tH,{fallback:(0,s.jsx)("p",{children:"An error has occurred"}),children:(0,s.jsx)(B.A,{hid:m.hid,setDownloaded:S})})]}):null})]})]},g)}var W=r(54638),Y=r.n(W),J=r(6314),$=r.n(J),X=r(70918),ee=r(96152),et=r(77140),er=r(26314),es=r(89103);let el=n.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 5.25 7.5 7.5 7.5-7.5m-15 6 7.5 7.5 7.5-7.5"}))});var ea=r(28749),en=r(29236),ei=r(77519),ec=r(34982),eo=r(29430),ed=r(1118);function eu(e,t){return"function"==typeof e?e.length?e(t):e():e}let eh=function(e){void 0===e&&(e=[]);var t=(0,n.useRef)(eu(e)),r=(0,ed.A)(),s=(0,n.useMemo)(function(){var l={set:function(e){t.current=eu(e,t.current),r()},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length&&s.set(function(t){return t.concat(e)})},updateAt:function(e,t){s.set(function(r){var s=r.slice();return s[e]=t,s})},insertAt:function(e,t){s.set(function(r){var s=r.slice();return e>s.length?s[e]=t:s.splice(e,0,t),s})},update:function(e,t){s.set(function(r){return r.map(function(r){return e(r,t)?t:r})})},updateFirst:function(e,r){var l=t.current.findIndex(function(t){return e(t,r)});l>=0&&s.updateAt(l,r)},upsert:function(e,r){var l=t.current.findIndex(function(t){return e(t,r)});l>=0?s.updateAt(l,r):s.push(r)},sort:function(e){s.set(function(t){return t.slice().sort(e)})},filter:function(e,t){s.set(function(r){return r.slice().filter(e,t)})},removeAt:function(e){s.set(function(t){var r=t.slice();return r.splice(e,1),r})},clear:function(){s.set([])},reset:function(){s.set(eu(e).slice())}};return l.remove=l.removeAt,l},[]);return[t.current,s]};var em=r(42985),ex=r(14610),ep=r(25150),eg=r(25507),ef=r(52473);function ev(e){var t,r,l,a,i,d;let{comic:u,recommendable:h}=e,[m,v]=(0,n.useState)(!1),b=(0,p.md)(x.p9),w=(0,P.jE)(),{isLoading:_,data:k}=function(e,t,r){var s,l,a;let n=(0,p.md)(x.p9);return(0,g.I)({queryKey:["user_recommendations",e],queryFn:async()=>(0,f.A)("https://api.comick.io"+"/recommendations?hid=".concat(e),{credentials:"include",mode:"cors"}),enabled:!!(null==(l=n.data)||null==(s=l.identity)?void 0:s.id)&&(t||(null==(a=n.data.info.recommmendations)?void 0:a.includes(e)))&&r})}(u.hid,m,h),{data:A,hasNextPage:q,fetchNextPage:C}=(i=u.hid,d=h,(0,ex.q)({queryKey:["recommendations",i],queryFn:async e=>{let{pageParam:t}=e;return await (0,f.A)("https://api.comick.io"+"/comic/".concat(i,"/recommendations")+(t?"?page="+t:""),{mode:"cors"})},initialPageParam:1,enabled:d,placeholderData:(e,t)=>e,staleTime:6e5,gcTime:3e5,getNextPageParam:(e,t)=>(null==e?void 0:e.length)!=0&&30==e.length?t.length+1:void 0})),S=(null==A||null==(t=A.pages)?void 0:t.length)>0?A.pages.flatMap(e=>e):[];b.data.info.accept_mature_content||(S=S.filter(e=>"safe"==e.relates.content_rating)),b.data.info.accept_erotic_content||(S=S.filter(e=>"safe"==e.relates.content_rating||"suggestive"==e.relates.content_rating));let[R,{push:L,set:M,updateAt:O}]=eh([]);(0,n.useEffect)(()=>{M(k)},[M,k]);let E=!1;(null==(a=b.data)||null==(l=a.identity)||null==(r=l.verifiable_addresses)?void 0:r.length)>0&&new Date-new Date(b.data.identity.created_at)>11232e5&&b.data.identity.verifiable_addresses.some(e=>e.verified)&&(E=!0);let{handleSubmit:T,register:F,formState:{isSubmitting:D}}=(0,ei.mN)(),{mutate:I,isPending:K}=(0,em.n)({mutationFn:e=>(0,f.A)("https://api.comick.io/recommendations/add",{body:JSON.stringify({hid:e.hid,relates:R.map(e=>({hid:e.recommendations.hid,type:e.recommendations.type?e.recommendations.type:1==e.score?"up":"down"}))}),method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),onSuccess:()=>{w.invalidateQueries({queryKey:["recommendations",u.hid]}),w.invalidateQueries({queryKey:["user_recommendations",u.hid]}),w.invalidateQueries({queryKey:["user"]}),ef.Ay.success("Your recommendations were saved."),v(!1)}});return(0,s.jsxs)(s.Fragment,{children:[m&&(0,s.jsx)(N.A,{open:m,onClose:()=>v(!1),title:"Add Recommendation",position:"center",children:E?_?(0,s.jsx)(y.A,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(ec.A,{enterKeyHint:"enter",autoFocus:!0,placeholder:"Search comics in your FOLLOWING LIST.",detachedMediaQuery:"none",getSources:e=>{let{query:t}=e,r=new URLSearchParams;return r.append("q",t),r.append("user_id",b.data.identity.id),[{sourceId:"databases",async getItems(){let e=await (0,f.A)("https://api.comick.io/search/suggestion_in_mylist?"+r.toString(),{mode:"cors"}).catch(e=>[]);return(null==e?void 0:e.length)>0&&(e=e.filter(e=>!(null==R?void 0:R.some(t=>t.recommendations.hid==e.hid))&&e.hid!=u.hid)),e},onSelect(e){let{item:t,setIsOpen:r,setQuery:s}=e;L({score:1,recommendations:{title:t.title,hid:t.hid,slug:t.slug,md_covers:t.md_covers,type:"up"}}),s(""),r(!1)},templates:{item(e){let{item:t,components:r}=e;return(0,s.jsx)(eo.A,{hit:t,components:r})},noResults:()=>""!==t?(0,s.jsx)("div",{className:"italic text-center",children:"No results for this query."}):void 0}}]},navigator:{navigate:e=>{let{itemUrl:t}=e;if(!t)return}}})}),(null==R?void 0:R.length)>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mt-3",children:R.map((e,t)=>(0,s.jsxs)("a",{href:"/comic/"+e.recommendations.slug,target:"_blank",className:(0,j.A)("relative flex items-center space-x-3 rounded-lg border border-gray-300 dark:border-gray-700 p-2 md:p-3 lg:p-4 !pr-1 shadow-sm hover:dark:border-gray-500 ","delete"==e.recommendations.type&&"opacity-30"),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(eg.A,{cover:e.recommendations.md_covers[0],alt:e.recommendations.title,size:"xs"})}),(0,s.jsx)("div",{className:"min-w-0 flex-1 self-start text-xs md:text-xs",children:(0,s.jsx)("p",{className:"font-medium ",children:e.recommendations.title})}),(0,s.jsxs)("div",{className:"border-l dark:border-gray-600 border-gray-100 pl-5 group",onClick:r=>{O(t,{score:-1,recommendations:{title:e.recommendations.title,hid:e.recommendations.hid,slug:e.recommendations.slug,type:"delete",md_covers:e.recommendations.md_covers}}),r.stopPropagation(),r.preventDefault()},children:[(0,s.jsx)("div",{className:"w-6 h-5 rounded-full self-start dark:hover:bg-gray-600 hover:bg-gray-100 flex items-center justify-center hover:cursor-pointer group-hover:text-blue-500",children:(0,s.jsx)(er.A,{className:"w-5 h-5 font-bold"})}),-1==e.score&&"delete"!=e.recommendations.type?(0,s.jsx)(ea.A,{className:(0,j.A)("w-5 h-5 text-red-500 fill-red-500")}):null,1==e.score&&(0,s.jsx)(en.A,{className:(0,j.A)("w-5 h-5 text-green-600 fill-green-600")})]})]},e.recommendations.slug))}),(0,s.jsxs)("form",{onSubmit:T(e=>I(e)),children:[(0,s.jsx)("input",{type:"hidden",...F("hid"),value:u.hid}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(ep.A,{className:"btn mt-5 m-auto",color:"primary",type:"submit",disabled:D||K,children:"Submit"})})]})]}):(0,s.jsx)("div",{className:"p-5 text-center italic",children:"No comics have been selected yet."})]}):(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("ul",{className:"list-decimal ml-4",children:[(0,s.jsx)("li",{children:"You need an account to use this feature."}),(0,s.jsx)("li",{children:"Your account must have been verified."}),(0,s.jsx)("li",{children:"Your account must have been registered for 14 days."})]})})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h2",{id:"recommendations",children:"Recommendations"}),h&&(0,s.jsx)(ep.A,{color:"default",size:"xs",onClick:()=>v(!0),children:(0,s.jsx)(es.A,{className:"w-5 h-5 font-bold"})})]}),!h&&(0,s.jsx)("div",{className:"my-10 text-gray-400",children:"The section will unlock when 10 chapters are released."}),h&&(null==S?void 0:S.length)>0?(0,s.jsxs)("div",{className:"max-md:flex max-md:justify-center max-md:flex-wrap",children:[(0,s.jsx)("div",{className:"inline-grid grid-cols-3 md:grid-cols-6 lg:grid-cols-6 xl:grid-cols-8 mt-5 space-x-1 h-auto gap-4",children:S.map(e=>{let t=!1,r=!1;if((null==k?void 0:k.length)>0)for(let s of k)s.recommendations.hid==e.relates.hid&&(1==s.score?t=!0:r=!0);return(0,s.jsxs)("div",{className:"mb-5 w-28 md:w-28 lg:w-36 group",children:[(0,s.jsxs)("div",{className:"relative w-28 md:w-28 lg:w-36 h-36 md:h-36 lg:h-44",onMouseOver:()=>{},children:[(0,s.jsx)(o.A,{src:e.relates.md_covers[0],alt:e.relates.title,className:"w-28 md:w-28 lg:w-36 h-36 md:h-36 lg:h-44 object-cover"}),(0,s.jsxs)("div",{className:"absolute bottom-0 bg-black bg-opacity-70 px-2 max-md:group-hover:px-1 py-1 font-bold text-white flex group-hover:gap-1 md:group-hover:gap-2 rounded-tr justify-start items-center cursor-pointer",children:[(0,s.jsxs)("div",{onClick:()=>{(0,f.A)("https://api.comick.io/recommendations/add",{body:JSON.stringify({hid:u.hid,relates:[{hid:e.relates.hid,type:"up"}]}),method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(()=>{ef.Ay.success('You upvoted "'.concat(e.relates.title,'"')),w.invalidateQueries({queryKey:["recommendations",u.hid]}),w.invalidateQueries({queryKey:["user_recommendations",u.hid]}),w.invalidateQueries({queryKey:["user"]})})},className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-5/12 hidden group-hover:block",children:(0,s.jsx)(en.A,{className:(0,j.A)("w-4 h-4 md:w-5 md:h-5",t?"text-green-600  hover:text-green-500":"text-gray-400 hover:text-gray-300")})}),(0,s.jsx)("div",{className:"hidden group-hover:block text-xs",children:e.up})]}),(0,s.jsx)("div",{className:"w-5/12 hidden group-hover:block",children:(0,s.jsx)(ea.A,{className:(0,j.A)("w-4 h-4 md:w-5 md:h-5 cursor-pointer",r?"text-red-500 fill-red-500":"text-gray-400 hover:text-gray-300"),onClick:()=>{(0,f.A)("https://api.comick.io/recommendations/add",{body:JSON.stringify({hid:u.hid,relates:[{hid:e.relates.hid,type:"down"}]}),method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(()=>{ef.Ay.success('You downvoted "'.concat(e.relates.title,'"')),w.invalidateQueries({queryKey:["recommendations",u.hid]}),w.invalidateQueries({queryKey:["user_recommendations",u.hid]}),w.invalidateQueries({queryKey:["user"]})})}})}),(0,s.jsx)("div",{className:"group-hover:hidden text-xs font-bold",children:e.up+e.down}),(0,s.jsx)("div",{className:"hidden group-hover:block text-xs",children:e.down})]})]}),(0,s.jsx)(c(),{prefetch:!1,href:"/comic/".concat(e.relates.slug),className:"mt-2 font-semibold text-xs md:text-sm line-clamp-2 break-all link",children:e.relates.title})]},e.relates.slug)})}),q?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)(ep.A,{onClick:()=>C(),children:[(0,s.jsx)(el,{className:"h-4 w-4 mr-1"})," Show More"]})}):null]}):null]})}function ey(){let e=(0,p.md)(x.p9),t=(0,a.useRouter)();return e.data.identity?null:(0,s.jsx)(N.A,{open:!0,onClose:()=>null,title:"Login Required",position:"center",hideCloseBtn:!0,blur:!0,children:(0,s.jsxs)("div",{className:"my-10 text-center text-lg",children:[(0,s.jsx)("div",{children:"You need an account to view this page."}),(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)(ep.A,{size:"2xl",onClick:()=>t.back(),children:"Back"})})]})})}var ej=r(8511);let eb=$()(()=>r.e(5829).then(r.bind(r,75829)),{ssr:!1}),ew=$()(()=>r.e(9571).then(r.bind(r,49571)),{ssr:!1});var eN=!0;function e_(e){var t,r,i,o,d,u,h,m,g,f,y,b,w,N,A,q,C,P,R;let{comic:L,langList:O,authors:E,artists:T,matureContent:F,demographic:D,checkVol2Chap1:I,firstChapters:K,recommendable:Q}=e,V=(0,M.A)(),B=(0,S.A)(),z=(0,a.useRouter)(),[H,Z]=(0,n.useState)(!1),G=(0,p.md)(x.p9),W=(0,p.md)(x.pv);(0,n.useEffect)(()=>{(0,ej.Hh)().then(e=>e.detect()).then(e=>{e.bot&&Z(!0)}).catch(e=>console.error(e))},[]);let{englishTitle:J,filteredTitles:$}=(0,n.useMemo)(()=>{if(!(null==L?void 0:L.md_titles)||!1!==L.is_english_title)return{englishTitle:null,filteredTitles:L.md_titles};let e="",t=[];for(let r of L.md_titles)"en"!==r.lang||e?t.push(r):e=r.title;return{englishTitle:e,filteredTitles:t}},[null==L?void 0:L.md_titles]);if(z.isFallback||!L)return(0,s.jsx)(l.A,{});let ee=!1;((null==(t=L.links)?void 0:t.engtl)||L.noindex)&&(ee=!0),("kr"==L.country||"jp"==L.country)&&(ee=!0),(null==(i=L.mu_comics)||null==(r=i.mu_comic_publishers)?void 0:r.length)>0&&(null==(o=L.mu_comics)?void 0:o.mu_comic_publishers.some(e=>["kadokawa","shueisha","kodansha","shogakukan","viz","00-shu-cream-pop","houbunsha","mag-garden","ascii-media-works","enterbrain"].includes(e.mu_publishers.slug)))&&(ee=!0);let er=!1;return((L.md_comic_md_genres.some(e=>"incest"==e.md_genres.slug)||!1==L.adsense)&&(er=!0),("erotica"==L.content_rating||L.md_comic_md_genres.some(e=>"yaoi"==e.md_genres.slug))&&B&&!H&&!(null==(u=G.data)||null==(d=u.info)?void 0:d.accept_erotic_content))?(0,s.jsx)(X.A,{title:L.title}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eA,{comic:L,noindex:ee}),"erotica"==L.content_rating||er?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(et.A,{})}),function(e,t,r){var l,a;let n=(null==(a=e.md_covers)||null==(l=a[0])?void 0:l.b2key)?"https://"+(0,v.bc)()+"/"+e.md_covers[0].b2key:"https://comick.io/static/unicorn-512.png";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y(),{type:"application/ld+json",id:"comic-jsonld-".concat(e.slug),dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org/","@type":"ComicSeries",name:e.title,image:n,...e.bayesian_rating>0?{aggregateRating:{"@type":"AggregateRating",ratingValue:e.bayesian_rating/2,ratingCount:e.rating_count,bestRating:"10",worstRating:"0"}}:{},...(null==t?void 0:t.length)>0?{author:{"@type":"Person",name:t[0].name}}:{},...(null==r?void 0:r.length)>0?{artist:{"@type":"Person",name:r[0].name}}:{},alternateName:[]})}}),(0,s.jsx)("script",{id:"__MALSYNC__",type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({selector_position:"#mal-sync",id:e.id,links:e.links,title:e.title,comic_url:"https://comick.io/comic/"+e.slug})}},"comic-json-".concat(e.slug))]})}(L,E,T),(0,s.jsx)(eb,{matureContent:F}),"erotica"==L.content_rating&&(0,s.jsx)("div",{className:"my-3",children:(0,s.jsx)(ew,{})}),B&&L.login_required?(0,s.jsx)(ey,{}):null,(0,s.jsxs)("div",{className:(0,j.A)("xl:max-w-screen-xl mx-auto space-y-20 divide-gray-500",W?"mt-1 md:mt-2 md:pt-2 lg:pt-3 xl:pt-4":"mt-6 lg:mt-16"),children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 max-xl:px-1",children:[(0,s.jsxs)("div",{className:"md:hidden col-span-3 break-words max-md:mb-4",children:[(0,s.jsx)("h1",{className:(null==J?void 0:J.length)>50?"text-xl":void 0,children:J||L.title}),J&&(0,s.jsx)("h2",{className:(0,j.A)((null==J?void 0:J.length)>50&&"text-lg","dark:text-gray-500 text-gray-500"),children:L.title})]}),(0,s.jsx)("div",{className:(0,j.A)("mr-4 relative",(null==(m=L.mu_comics)||null==(h=m.mu_comic_categories)?void 0:h.length)>0?"row-span-5":"row-span-4"),children:(0,s.jsx)(ek,{comic:L})}),(0,s.jsxs)("div",{className:"md:col-span-2 text-sm md:text-base",children:[(0,s.jsxs)("div",{className:"justify-between break-words hidden md:block",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:(null==J?void 0:J.length)>50&&"text-xl lg:text-2xl",children:J||L.title}),J&&(0,s.jsx)("h2",{className:(0,j.A)((null==(g=L.title)?void 0:g.length)>50&&"text-lg lg:text-md","dark:text-gray-500 text-gray-500"),children:L.title})]}),(0,s.jsx)("div",{className:"w-64 md:w-72"})]}),(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400 overflow-auto mt-3 ",style:{maxHeight:"4.5em"},children:$?$.map(e=>e.title).join(" • "):null}),(0,s.jsx)("hr",{className:"my-2 dark:border-gray-600"}),L.country?(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Origination:"," "]}),(0,s.jsx)(eR,{name:L.lang_name,native:L.lang_native,country:L.country})]}):null,(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Demographic:"," "]}),(0,s.jsx)("span",{children:D})]}),L.year?(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Published:"," "]}),(0,s.jsx)(c(),{prefetch:!1,href:"/search?from=".concat(L.year,"&to=").concat(L.year),className:"link",children:L.year})]}):null,(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Status: "}),1==L.status?(0,s.jsx)("span",{children:"\uD83D\uDCD6 Ongoing"}):null,2==L.status?(0,s.jsx)("span",{children:"\uD83D\uDCD7 Completed"}):null,3==L.status?(0,s.jsx)("span",{children:"⏹️ Cancelled"}):null,4==L.status?(0,s.jsx)("span",{children:"⏸️ Hiatus"}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Translation:"," "]}),!0===L.translation_completed?(0,s.jsx)("span",{children:"\uD83D\uDCD7 Completed"}):!1===L.translation_completed?(0,s.jsx)("span",{children:"\uD83D\uDCD6 Ongoing"}):(0,s.jsx)("span",{className:"text-gray-500",children:"Unknown"})]}),L.final_chapter||L.final_volume?(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Final Chapter:"," "]}),L.final_volume?(0,s.jsxs)("span",{children:["Volume ",L.final_volume,", "]}):null,L.final_chapter?(0,s.jsxs)("span",{children:["Chapter ",L.final_chapter]}):null]}):null,(0,s.jsxs)("div",{className:"flex flex-wrap",children:[(0,s.jsxs)("div",{className:"mr-2",children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 ",children:["Ranked:"," "]}),(null==L?void 0:L.follow_rank)?"#"+(null==(f=L.follow_rank)?void 0:f.toLocaleString()):"N/A"]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Followed by"," "]}),(0,s.jsxs)(c(),{prefetch:!1,href:"/comic/"+L.slug+"/followers",className:"link",children:[L.user_follow_count.toLocaleString()," ","users"," "]})," ",(null==L?void 0:L.follow_count)?(0,s.jsx)("span",{className:"text-[9px] align-top"}):null]})]}),B&&L.bayesian_rating?(0,s.jsx)(eS,{rating:L.bayesian_rating}):null]}),(0,s.jsxs)("div",{className:"col-span-3 md:col-span-2 my-8",children:[B?(0,s.jsx)(k,{comic:L,firstChapters:K}):null,L.mismatch&&(0,s.jsx)("div",{className:"my-3",children:(0,s.jsx)(_.A,{type:"warn",children:(0,s.jsx)("span",{children:"The chapter number could be mismatched if you select different groups."})})}),(0,s.jsx)("div",{id:"mal-sync"})]}),(0,s.jsxs)("div",{className:"col-span-3 mt-3 md:col-span-2 space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Description"}),L.desc?(0,s.jsx)("div",{className:"comic-desc xl:h-auto max-h-96 overflow-y-auto scrollbox dark:scrollbox-dark scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-700 scrollbar-thumb-rounded my-3 md:my-5 prose prose-hr:my-3 dark:prose-invert max-w-none prose-table:w-auto",dangerouslySetInnerHTML:{__html:L.parsed}}):(0,s.jsx)("div",{className:"my-3 md:my-5",children:"N/A"})]}),(0,s.jsxs)("div",{className:"col-span-3 md:col-span-2 text-sm md:text-base space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"More Info"}),(0,s.jsx)("table",{className:"mt-3 md:mt-5 ",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{className:"mt-3",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400",children:["Artists:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:(null==T?void 0:T.length)>0&&T.map((e,t)=>(0,s.jsxs)("span",{children:[(0,s.jsx)(c(),{href:"/people/"+e.slug,prefetch:!1,className:"link",children:e.name}),t<T.length-1&&", "]},"people"+e.slug+t))})]}),(0,s.jsxs)("tr",{className:" mt-1",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400",children:["Authors:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:(null==E?void 0:E.length)>0&&E.map((e,t)=>(0,s.jsxs)("span",{children:[(0,s.jsx)(c(),{href:"/people/"+e.slug,prefetch:!1,className:"link",children:e.name}),t<E.length-1&&", "]},"author"+e.slug+t))})]}),(null==(y=L.md_comic_md_genres)?void 0:y.length)>0&&(null==(b=L.md_comic_md_genres.filter(e=>"Genre"==e.md_genres.group||"Content"==e.md_genres.group))?void 0:b.length)>0&&(0,s.jsxs)("tr",{className:" mt-1",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:["Genres:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:L.md_comic_md_genres.filter(e=>"Genre"==e.md_genres.group||"Content"==e.md_genres.group).map((e,t)=>(0,s.jsxs)("span",{children:[0!=t?(0,s.jsx)("span",{children:", "}):"",(0,s.jsx)(c(),{href:"/search?genres="+e.md_genres.slug,prefetch:!1,className:"link",children:e.md_genres.name})]},"genre-"+t))})]}),(null==(w=L.md_comic_md_genres)?void 0:w.length)>0&&(null==(N=L.md_comic_md_genres.filter(e=>"Theme"==e.md_genres.group))?void 0:N.length)>0&&(0,s.jsxs)("tr",{className:" mt-1",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:["Theme:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:L.md_comic_md_genres.filter(e=>"Theme"==e.md_genres.group).map((e,t)=>(0,s.jsxs)("span",{children:[0!=t?(0,s.jsx)("span",{children:", "}):"",(0,s.jsx)(c(),{href:"/search?genres="+e.md_genres.slug,prefetch:!1,className:"link",children:e.md_genres.name})]},"genre-"+t))})]}),(null==(A=L.md_comic_md_genres)?void 0:A.length)>0&&(null==(q=L.md_comic_md_genres.filter(e=>"Format"==e.md_genres.group))?void 0:q.length)>0&&(0,s.jsxs)("tr",{className:" mt-1",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:["Format:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:L.md_comic_md_genres.filter(e=>"Format"==e.md_genres.group).map((e,t)=>(0,s.jsxs)("span",{children:[0!=t?(0,s.jsx)("span",{children:", "}):"",(0,s.jsx)(c(),{href:"/search?genres="+e.md_genres.slug,prefetch:!1,className:"link",children:e.md_genres.name})]},"genre-"+t))})]}),(null==(C=L.mu_comics)?void 0:C.mu_comic_publishers.length)>0&&(0,s.jsxs)("tr",{className:" mt-1",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:["Publishers:"," "]}),(0,s.jsx)("td",{className:"pl-2",children:L.mu_comics.mu_comic_publishers.map((e,t)=>(0,s.jsxs)("span",{children:[0!=t?(0,s.jsx)("span",{children:", "}):"",(0,s.jsx)(c(),{href:"/publisher/"+e.mu_publishers.slug,prefetch:!1,className:"link",children:e.mu_publishers.title})]},"publisher-"+t))})]})]})})]}),L.relate_from&&(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto scrollbox dark:scrollbox-dark scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-700 scrollbar-thumb-rounded mt-1",children:B&&(0,s.jsx)(eC,{comic:L})})]}),(null==(R=L.mu_comics)||null==(P=R.mu_comic_categories)?void 0:P.length)>0?(0,s.jsx)(eP,{categories:L.mu_comics.mu_comic_categories},L.slug):null,(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(eq,{links:L.links})})]})]}),V("xl")||"erotica"==L.content_rating||er?null:(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:"max-xl:pl-1",children:B&&(0,s.jsx)(U,{comic:L,langList:O,checkVol2Chap1:I})}),(0,s.jsx)("div",{className:"max-xl:px-1",children:(0,s.jsx)(ev,{comic:L,recommendable:Q})})]})]})}function ek(e){var t;let{comic:r}=e,[l,a]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(0,v.xx)()&&a(!0)},[]);let i=(0,p.md)(x.p9),d=(0,S.A)(),u="";return(i.data.info.accept_mature_content||"erotica"!=r.content_rating&&"suggestive"!=r.content_rating||(u="suggestive"==r.content_rating?"blur-sm":"blur"),(null==(t=r.md_covers)?void 0:t.length)>0)?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c(),{prefetch:!1,href:"/comic/".concat(r.slug,"/cover"),children:d&&(0,s.jsx)(o.A,{src:r.md_covers[0],alt:r.title,className:(0,j.A)("rounded w-full mb-2 md:mb-3 lg:mb-4",u),type:"cover",priority:!0,objectFit:"contain",objectPosition:"top",sizes:"(max-width: 800px) 50vw, (max-width: 1400px) 40vw, 30vw"})}),l&&(0,s.jsx)("div",{className:"rounded-full absolute top-1 right-1 bg-gray-500  bg-opacity-60 items-center flex p-1 z-10",children:(0,s.jsx)(ee.A,{className:"w-5 h-5 stroke-white relative right-[0.9px]",onClick:()=>{navigator.share&&navigator.share({title:r.title,text:"Read ".concat(r.title," on Comick"),url:window.location.href}).then(()=>console.info("Successful share")).catch(e=>console.error("Error sharing",e))}})})]}):null}function eA(e){var t,r,l,a,n,i;let c,{comic:o,noindex:u}=e,h="";return c=o.desc?"\uD83D\uDCD6 "+(c=(h=o.desc.replace(/(<([^>]+)>)/gi,"")).length>160?h.substr(0,160):h):"Read "+o.title,o.country,o.country,(0,s.jsx)(d.bV,{title:o.title,description:c,canonical:"/comic/".concat(o.slug),robotsProps:{noimageindex:!0},noindex:u,nofollow:!1,openGraph:{type:"book",title:o.title,description:c,...(null==(r=o.md_covers)||null==(t=r[0])?void 0:t.b2key)&&o.md_covers[0].h?{images:[{url:"https://"+(0,v.bc)()+"/"+o.md_covers[0].b2key,alt:"".concat(o.title," image cover"),height:null==(a=o.md_covers)||null==(l=a[0])?void 0:l.h,width:null==(i=o.md_covers)||null==(n=i[0])?void 0:n.w}]}:{}}})}function eq(e){let{links:t}=e,r=[],l=[],a=[];try{let e;if(!t)return null;for(let n in e=t,t=Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{})){let e,i;switch(n){case"al":e="https://anilist.co/manga/"+t[n];break;case"amz":case"cdj":case"ebj":e=t[n];break;case"ap":e="https://www.anime-planet.com/manga/"+t[n];break;case"bw":e="https://bookwalker.jp/series/"+t[n];break;case"kt":e="https://kitsu.io/manga/"+t[n];break;case"mal":e="https://myanimelist.net/manga/"+t[n];break;case"mu":e=Number(t[n])==t[n]?"https://www.mangaupdates.com/series.html?id="+t[n]:"https://www.mangaupdates.com/series/"+t[n];break;case"nu":e="https://www.novelupdates.com/series/"+t[n];break;case"raw":t[n].match(/naver/),e=t[n];break;case"engtl":e=t[n].replace("?utm_source=mgd","?utm_source=comick")}-1==e.indexOf("utm_source=comick")&&(e.match(/\?/)?e+="&utm_source=comick":e+="?utm_source=comick"),i="raw"==n?(0,s.jsxs)("div",{title:"Raw link",className:" flex w-20 shrink-0 items-center px-2 py-1 bg-gray-100 dark:bg-gray-700 font-semibold text-gray-700 dark:text-gray-400 text-center ml-2 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:[(0,s.jsx)("img",{src:"https://www.google.com/s2/favicons?sz=32&domain_url=https://"+new URL(t[n]).hostname,className:"w-6 h-6",alt:n}),(0,s.jsx)("div",{className:"ml-1",children:"Raw"})]}):"engtl"==n?(0,s.jsxs)("div",{title:"English link",className:" shrink-0 w-20 flex items-center px-2 py-1 bg-gray-100 font-semibold text-gray-700 dark:text-gray-400 text-center ml-2 rounded whitespace-nowrap hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600",children:[(0,s.jsx)("img",{src:"https://www.google.com/s2/favicons?sz=32&domain_url=https://"+new URL(t[n]).hostname,className:"w-6 h-6",alt:n}),(0,s.jsx)("div",{className:"ml-1",children:"Eng"})]}):(0,s.jsx)("span",{title:n+" link",className:"block bg-auto bg-".concat(n," cursor-pointer w-6 h-6 ml-2 rounded hover:opacity-60")});let c=(0,s.jsx)("a",{href:e,rel:"nofollow noreferrer",target:"_blank",className:"flex",children:i},"link"+n);-1!=["mu","nu","mal","kt","ap","al"].indexOf(n)?r.push(c):-1!=["raw","engtl"].indexOf(n)?a.push(c):l.push(c)}if((!a||0==a.length)&&(!r||0==r.length)&&(!l||0==l.length))return null}catch(e){return null}return(0,s.jsxs)("div",{className:"flex items-center max-w-max overflow-x-auto scrollbox dark:scrollbox-dark scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-700 scrollbar-thumb-rounded space-x-3",children:[(0,s.jsx)("h3",{className:"whitespace-nowrap text-base",children:"Referrers"}),a.length>0?(0,s.jsx)("div",{className:"flex items-center py-2",children:a}):null,r.length>0?(0,s.jsx)("div",{className:"flex py-2",children:r}):null,l.length>0?(0,s.jsx)("div",{className:"flex py-2 ml-3 ",children:l}):null]})}function eC(e){let{comic:t}=e;return t.relate_from.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Relations"}),(0,s.jsx)("table",{className:"table mt-3 md:mt-5 ",children:(0,s.jsx)("tbody",{children:t.relate_from.map((e,t)=>{let r="";switch(e.md_relates.name){case"Sequel":r="text-red-500 font-semibold";break;case"Prequel":r="text-purple-500 font-semibold";break;case"Alternate version":r="text-yellow-500 font-semibold";break;case"Monochrome":r="font-semibold text-sky-600";break;case"Coloured":r="text-teal-500 font-semibold"}return(0,s.jsxs)("tr",{className:"flex truncate",children:[(0,s.jsxs)("td",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0 mr-1",children:[(0,s.jsx)("span",{className:r,children:e.md_relates.name}),": "]}),(0,s.jsx)("td",{children:(0,s.jsx)(c(),{prefetch:!1,href:"/comic/".concat(e.relate_to.slug),className:"link",children:e.relate_to.title})})]},"related"+t)})})})]}):null}function eS(e){let{rating:t}=e,r=Number((t/2).toFixed()),l=[];for(let e=0;e<r;e++)l.push((0,s.jsx)("span",{children:"⭐"}));return t&&0!=t?(0,s.jsx)("div",{className:"flex my-2",children:(0,s.jsxs)("div",{className:"flex items-center",children:[l," ",(0,s.jsx)("div",{className:"ml-1",children:t})]})}):null}function eP(e){let{categories:t}=e,r=t[0].positive_vote>5,[l,a]=(0,n.useState)(t[0].positive_vote>5?t.filter(e=>e.positive_vote-e.negative_vote>0):t),[i,o]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"col-span-3 md:col-span-2 ",children:[(0,s.jsxs)("h3",{className:"font-semibold flex items-end",children:["Tags"," ",r&&(0,s.jsx)("div",{className:"text-xs font-normal ml-2 mb-1 cursor-pointer hover:underline",onClick:()=>{i?a(t.filter(e=>e.positive_vote>0)):a(t),o(!i)},children:i?"Show less":"Show hidden tags"})]}),(0,s.jsx)("ul",{className:"scrollbox dark:scrollbox-dark mt-3 mb-3 flex flex-wrap max-h-32 md:max-h-48 xl:max-h-48  overflow-y-auto items-center scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-700 scrollbar-thumb-rounded",children:l.map((e,r)=>{if(!e.mu_categories)return null;let l="";return t.length>12&&r/t.length<.3&&(l="md:text-lg"),(0,s.jsx)("li",{className:(0,j.A)("text-sm md:text-base ml-1 mt-1 px-2 py-1 rounded bg-gray-100 dark:bg-gray-750 cursor-pointer active:bg-blue-500 hover:bg-gray-200 dark:hover:bg-gray-700",l),title:"Vote: ".concat(e.positive_vote-e.negative_vote),children:(0,s.jsx)(c(),{href:"/search?tags="+e.mu_categories.slug,prefetch:!1,children:e.mu_categories.title})},"category "+r)})})]})}function eR(e){if("jp"==e.country)return(0,s.jsx)("span",{children:"Manga"});if("kr"==e.country)return(0,s.jsx)("span",{children:"Manhwa"});if("cn"==e.country||"hk"==e.country||"tw"==e.country)return(0,s.jsx)("span",{children:"Manhua"});let t=(0,v.$T)(e.country);return(null==t?void 0:t.name)?(0,s.jsx)("span",{children:t.name}):null}},61390:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(21462);let l=s.forwardRef(function(e,t){let{title:r,titleId:l,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},a),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0-6.75 6.75M12 4.5l6.75 6.75"}))})},63179:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(23798),l=r(97933),a=r(97393);function n(e){let{size:t="md",iconOnly:r=!1}=e;return r?(0,s.jsx)(l.A,{className:(0,a.A)("animate-spin text-blue-500","md"==t?"h-8 w-8":"h-6 w-6")}):(0,s.jsxs)("div",{className:(0,a.A)("inline-flex relative leading-none items-center text-center"),children:[(0,s.jsx)(l.A,{className:(0,a.A)("animate-spin text-blue-500","md"==t?"h-8 w-8":"h-6 w-6")}),!r&&(0,s.jsx)("span",{className:"inline-block align-top select-none",children:"Loading"})]})}},65684:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(23798),l=r(3169),a=r(66478),n=r(93688),i=r(59336),c=r(52473);function o(){let[e,t]=(0,l.fp)(a.i$),r=(0,l.md)(a.p9),o=(0,n.jE)();return l=>{let{comicId:a,nextId:n=null,chapterId:d,create:u=!1,chap:h=null}=l;return new Promise(l=>{if(!r.data.identity||e===d)return l(!0);let m=new URL("https://api.comick.io/last_read");return t(d),(0,i.A)(m.href,{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({comicId:a,nextId:n,chapterId:d,create:u})}).then(()=>{o.invalidateQueries({queryKey:["get_following_comics_or_by_id"]}),o.invalidateQueries({queryKey:["get_follow_by_user",a]}),o.invalidateQueries({queryKey:["following_chapters"]}),o.invalidateQueries({queryKey:["current_user_list"]}),o.invalidateQueries({queryKey:["user"]}),o.invalidateQueries({queryKey:["comic_ids_current_user_list"]}),h&&c.Ay.success((0,s.jsxs)("span",{children:["Marked ",(0,s.jsx)("strong",{children:h})," as last read"]})),l(!0)}).catch(e=>{e.message?c.Ay.error("An error occurred while bookmarking this chapter: "+e.message):c.Ay.error("Can not bookmark the chapter.")})})}}},66556:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(21462);let l=s.forwardRef(function(e,t){let{title:r,titleId:l,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},a),r?s.createElement("title",{id:l},r):null,s.createElement("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z",clipRule:"evenodd"}))})},70918:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(23798),l=r(56854),a=r(25150),n=r(59075),i=r(3169),c=r(96704),o=r(66478),d=r(21462),u=r(46720);function h(e){let{title:t}=e,r=(0,l.A)(),h=(0,n.A)(),m=(0,i.md)(o.p9),x=(0,i.Xr)(o.N2),p=(0,u.useRouter)();return((0,d.useEffect)(()=>(x(!1),()=>{x(!0)}),[x]),m.data.identity)?(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-center text-2xl",children:t}),(0,s.jsx)("div",{className:"my-10 text-center text-lg",children:"The comic may not be appropriate for all ages, or may not be appropriate for viewing at work."}),(0,s.jsx)("div",{className:"my-10 text-center text-lg",children:"By clicking View Page, you affirm that you are at least 18 years old. Please be honest — your answer matters."}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsxs)("div",{className:"space-x-5",children:[(0,s.jsx)(a.A,{size:h("xl")?"2xl":"xl",onClick:()=>{try{localStorage}catch(e){alert("You need to enable cookies/localStorage to save this option.")}r.mutate({accept_erotic_content:!0})},children:"View Page"}),(0,s.jsx)(a.A,{size:h("xl")?"2xl":"xl",onClick:()=>p.back(),children:"Cancel"})]})})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"max-w-xl mx-auto mt-10",children:(0,s.jsx)(c.A,{type:"warn",children:"You must login to see this content."})})})}},73913:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/comic/[slug]",function(){return r(52310)}])},80702:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(23798),l=r(21462);let a=!1;function n(){return(0,l.useEffect)(()=>{a=!0},[]),a&&(0,s.jsxs)("div",{className:"text-center p-4 py-12 ",children:[(0,s.jsxs)("div",{className:"inline-flex font-medium text-xl relative leading-none",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-6 w-6 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"inline-block align-top select-none",children:"Loading"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("em",{children:"It shouldn't take too long."})})]})}},85271:function(e){e.exports=function(e,t,r){e=e||{};var s=t.prototype,l={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,r,l){return s.fromToBase(e,t,r,l)}r.en.relativeTime=l,s.fromToBase=function(t,s,a,n,i){for(var c,o,d,u=a.$locale().relativeTime||l,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],m=h.length,x=0;x<m;x+=1){var p=h[x];p.d&&(c=n?r(t).diff(a,p.d,!0):a.diff(t,p.d,!0));var g=(e.rounding||Math.round)(Math.abs(c));if(d=c>0,g<=p.r||!p.r){g<=1&&x>0&&(p=h[x-1]);var f=u[p.l];i&&(g=i(""+g)),o="string"==typeof f?f.replace("%d",g):f(g,s,p.l,d);break}}if(s)return o;var v=d?u.future:u.past;return"function"==typeof v?v(o):v.replace("%s",o)},s.to=function(e,t){return a(e,t,this,!0)},s.from=function(e,t){return a(e,t,this)};var n=function(e){return e.$u?r.utc():r()};s.toNow=function(e){return this.to(n(this),e)},s.fromNow=function(e){return this.from(n(this),e)}}},96704:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(23798),l=r(57206),a=r(27386),n=r(99089),i=r(15899);function c(e){let t,r,{type:c,children:o}=e;if("warn"==c)t=(0,s.jsx)(l.A,{className:"w-8 h-8 mr-2"}),r="border-yellow-400 dark:border-yellow-700 bg-yellow-100 dark:bg-yellow-900 text-yellow-900 dark:text-yellow-300";else if("error"==c)t=(0,s.jsx)(a.A,{className:"w-8 h-8 mr-2"}),r="border-red-400 dark:border-red-700 bg-red-100 dark:bg-red-900 text-red-900 dark:text-red-300";else if("info"==c)t=(0,s.jsx)(n.A,{className:"w-8 h-8 mr-2"}),r="border-blue-400 dark:border-blue-700 bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-300";else{if("success"!=c)return(0,s.jsx)(s.Fragment,{});t=(0,s.jsx)(i.A,{className:"w-8 h-8 mr-2"}),r="border-green-400 dark:border-green-700 bg-blue-100 dark:bg-green-900 text-green-900 dark:text-green-300"}return(0,s.jsxs)("div",{className:"rounded p-2 flex border-l-8 shadow items-center ".concat(r," mx-1 md:mx-0"),children:[(0,s.jsx)("div",{className:"float-left",children:t}),(0,s.jsx)("span",{className:"text-xs md:text-sm lg:text-base w-full",children:o})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7519,1361,2790,175,636,6593,8792],()=>t(73913)),_N_E=e.O()}]);